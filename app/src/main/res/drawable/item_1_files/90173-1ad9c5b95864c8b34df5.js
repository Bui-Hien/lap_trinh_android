"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[90173],{117031:function(e,t,r){r.d(t,{E:function(){return a},m:function(){return i}});var n=r(590173),o=r(149500);let i={handlePageOnload(){try{sa("set","setPageData",window.SaPageInfo),sa("send","pageEnter",{start_time:Date.now()})}catch(e){o.log(e)}},handlePageUnload(){try{sa("send","pageLeave",{end_time:Date.now()})}catch(e){o.log(e)}}};function s(e,t){let r="";return 1==t&&(r="click_bad_type_"),0==e?r+="return_refund":1==e?r+="payment":2==e?r+="quality_size":3==e?r+="order_process_tracking":4==e?r+="customer_service_agent":5==e&&(r+="promos_website_function"),r}const a={ReportName(e){saObj.question(e)},clickInviteRate(){saObj.question("click_agent_invite_rate")},clickCancelQueue(){saObj.question("click_cancel_queue")},clickCancelQueueNo(){saObj.question("click_cancel_queue_no")},clickCancelQueueYes(){saObj.question("click_cancel_queue_yes")},clickEndChat(e){saObj.question("click_end_chat",{isRated:e?1:0})},clickLeaveChatLeave(){saObj.question("click_leave_chat_leave")},clickLeaveChatStay(){saObj.question("click_leave_chat_stay")},clickBadInfo(e){saObj.question(s(e,1))},clickChatTheme(e){e=e.toLocaleLowerCase().replace(/-/g,"").replace(/ /g,"_"),saObj.question(`click_question_type_${e}`)},clickManual(e){saObj.question(`click_manual_${e}`)},clickStartChat(e,t,r=""){saObj.question(e?"click_manual_service_start_chat":"click_without_signing_in_start_chat",{question_type_id:t?1:0,question_type_name:(0,n.hs)(r)})},clickRateSubmit(e,t,r){"good"!=t?saObj.question("click_rate_submit",{source_type:e,rate_result:1,bad_reason:s(r)}):saObj.question("click_rate_submit",{source_type:e,rate_result:0})},clickResend(){saObj.question("click_resend")},click_cancel_queue(){saObj.question("click_cancel_queue")},click_agent_invite_rate(){saObj.question("click_agent_invite_rate")},click_resend(){saObj.question("click_resend")},click_back_to_the_latest(){saObj.question("click_back_to_the_latest")},click_robot_history(){saObj.question("click_robot_history")},expose_queue_hint(e){saObj.question("expose_queue_hint",{start_chat_time:e})}}},789765:function(e,t,r){r.d(t,{$A:function(){return h},Ab:function(){return m},Hj:function(){return g},JS:function(){return S},Q7:function(){return p},TE:function(){return f},TH:function(){return O},TJ:function(){return I},UK:function(){return a},Vs:function(){return d},c6:function(){return c},ci:function(){return v},eQ:function(){return C},hC:function(){return u},hL:function(){return E},mL:function(){return _}});var n=r(465163),o=r(751284),i=r(590173);const s="pcKey",a=({ticketData:e={}}={})=>{const{url:t,id:r,channel:n}=e;return"cstk"==n?r?`/user/tickets/detail/${r}`:"/user/tickets":t||"/user/tickets"},c=({resInfo:e={},ticketTime:t,language:r={}}={})=>{const{ticket_no:o,url:i,type:s}=e,a=1==s?i:`/user/tickets/detail/${o}`;return(0,n.X)(`<a href="${a}" style="text-decoration: underline;font-weight: bold;color: #222">#${o}</a>`,t,r.SHEIN_KEY_PC_24992)},u=({resInfo:e={},ticketTime:t,language:r={},account_type:o,email:i}={})=>{const{ticket_no:s,result:a={}}=e,{url:c,ticket_id:u}=a,l=u||s,d=u?c:`/user/tickets/detail/${s}`;return`<h4> ${r.SHEIN_KEY_PC_15147}: <a href="${d}">${l}</a></h4><p class="des">${(({language:e={},account_type:t,ticketTime:r,email:o})=>{const i=`<a class="jump-ticket-link" href='/user/tickets' target="_blank">${e.SHEIN_KEY_PC_15144}</a>`;return 8==t?(0,n.X)(r,i,e.SHEIN_KEY_PC_19751):(0,n.X)(r,e.SHEIN_KEY_PC_15148).replace("[ticket]",i).replace("[email]",o)})({email:i,language:r,ticketTime:t,account_type:o})}</p>`},l=({submitGoodsArr:e,type:t,submitTicketForm:r,language:n}={})=>{if(null==e||!e.length)return{};const{billno:o}=r,s=[],a=[];let c="",u=[],l=0;return c+=`Order: ${o}\n`,e.forEach((e=>{if(e.checkbox){const d=e.product,_=(0,i.St)(e,n.SHEIN_KEY_PC_17113);s.push({sku:d.goods_sn,num:e.goodsNum,size:_,order_goods_id:e.id});const f=(0,i.Wd)(e.sortNum,e.goodsNum);f.length&&(u=u.concat(f)),a.push(e);let g=`sort_num:${e.sort_num}/SKU:${d.goods_sn}/${d.goods_name}/${_}/${e.totalPrice.amountWithSymbol}`;if("skcProductList"===t){var r,o;const t=(null===(r=e.imageLegend)||void 0===r||null===(o=r.map((e=>e.url)))||void 0===o?void 0:o.filter(Boolean))||[];t.length&&(g+=`/troubleUrls:${t.join(",")}`)}c+=`${g}\n`,l+=Number(e.goodsNum)}})),c+=`Qty:${l}\n`,{goodsText:c,formatOrderGoods:a,goodsSkuArr:s,sortNum:u}},d=({submitTicketForm:e={},tkModelData:t={},language:r={},getStoreRobotCode:n={},username:o,hasLevel3ThemeList:s,isImageRequired:a,ticketImageLegendStatus:c,nextTick:u,isGwosTaxCreate:d,isDeliverNotReceiveOpen:_,ticketIsRequestPackage:f,ticketHonestyOpen:g,isQualityTkCreate:m,isQualityTkOpen:p}={})=>{var k,h;let b={},y=!1,v=[],E="",C=[],S={},I=[],O="";const{ticket_theme_id:x,tkContent:N,imgToken:P,billno:w,email:L,name:T,storeCode:q,business_model:D,refundPathEn:H,honesty:R}=e,{isEmailExist:K,template:Y,orderGoods:A,giftOrderDetail:G,giftCheckbox:j,ticket_theme_level_3_id:M,shipping_no:B,reference_number:J,isCstk:W,imgArray:Z=[],imgCstkArray:U=[],textareaErrorList:V,tariffAmount:Q,tariffUpload:F=[],marketId:z,goodsQualityRequestList:X=[]}=t,ee=JSON.parse(JSON.stringify(A));if(x||(S.themeError=!0),s&&!M&&(S.themeLevel3Error=!0),f&&!B&&(S.shippingNoError=!0),!N.replace(/(^\s*)|(\s*$)/g,"")||V.length)if(p){const{required:e,show:t,isOpen:r}=(null==Y?void 0:Y.find((e=>"text"==e.type&&"content"==e.name)))||{};1==e&&1==t&&1==r&&(S.errorContent=!0)}else S.errorContent=!0;K&&(S.emailError=r.SHEIN_KEY_PC_17610);const{isOpen:te,isRequired:re}=g;1==te&&1!=R&&re&&(S.isShowHonesty=!0),b={name:T,email:L,ticket_theme_id:s?M:x,content:N,market_id:z,...(0,i.dC)({storeCode:q,billno:w,business_model:D}),...n},!W||null!=F&&F.length?(O=d||_?F:P,b.token=O):(null!=Z&&Z.length&&(I=Z.map((e=>e.attachment_token))),null!=U&&U.length&&(I=U.map((e=>e.attachment_token))),b.shuntToken=I);let ne=[],oe=0,ie=[];Y.forEach((t=>{var n,s,u;if(t.show){const g=t.name;switch(t.type){case"tip":!t.required||null!==(n=I)&&void 0!==n&&n.length||null!==(s=O)&&void 0!==s&&s.length||(S.imgErrTips=r.SHEIN_KEY_PC_27686);break;case"orderList":b[g]=w,t.required&&!w&&(S.billnoError=!0);break;case"productList":if(G.card_order_billno&&j){E=`Order: ${w}\n`;const{_cards:e={},currency_total_all_format:t}=G,{card_sku:r,card_name:n}=e;oe=1,ne.push({sku:r,num:oe,size:""}),E+=`sort_num:1/SKU:${r}/${n}/${t}\n`,E+=`Qty:${oe}\n`,b[g]=JSON.stringify(ne)}else if(A&&A.length){const{goodsText:t="",formatOrderGoods:n=[],goodsSkuArr:o=[],sortNum:s}=l({submitGoodsArr:A,type:"productList",submitTicketForm:e,language:r});if(E=t,C=n,ne=o,v=s,C.length){const{business_model:e,store_code:t}=(0,i._m)(C);b.storeCode=t,b.business_model=e}b[g]=JSON.stringify(ne)}t.required&&!ne.length&&(S.errorGoods=!0),"sku"==g&&(y=!0);break;case"skcProductList":if(A&&A.length){const{goodsText:t="",formatOrderGoods:n=[],goodsSkuArr:o=[],sortNum:s}=l({submitGoodsArr:A,type:"skcProductList",submitTicketForm:e,language:r});if(ie=o,E=t,b[g]=JSON.stringify(o),v=s,C=n,b.skc=JSON.stringify(o),C.length){const{business_model:e,store_code:t}=(0,i._m)(C);b.storeCode=t,b.business_model=e}}if(t.required&&!ie.length&&(S.errorGoods=!0),a&&A.length)if(1==c){var _;((null==A||null===(_=A[0])||void 0===_?void 0:_.imageLegend)||[]).some((e=>!e.url))&&(ee[0].isLackUrl=!0,S.orderGoods=ee)}else ee.forEach(((e,t)=>{if(e.checkbox){var r;(!(null!=e&&null!==(r=e.imageLegend)&&void 0!==r&&r.length)||e.imageLegend.some((e=>!e.url)))&&(ee[t].isLackUrl=!0,S.orderGoods=ee)}}));break;case"spinner":"refund_path"==g?H?b[g]=H:t.required&&(S.refundPathError=!0):(t.checked&&(b[g]=t.checked),t.required&&!t.checked&&(t.checkError=!0,S.template=Y));break;case"text":o||"name"!=g&&"email"!=g||("email"!=g||L||(S.emailError=t.displayTitleTran),"name"!=g||T||(S.nameError=t.displayTitleTran));break;case"digital":Q&&(b[g]=Q),d&&!Q&&(S.tariffAmountError=t.displayTitleTran);break;case"qc_goods":var f=[];null==X||!X.length||null!=X&&X.length&&null!==(u=X[0])&&void 0!==u&&u.isQcRequired?S.qualityProductError=!0:(X.map((e=>{f.push({attachment_tokens:e.attachment_tokens,first_quality_code:e.first_quality_code,second_quality_code:e.second_quality_code,order_goods_id:e.order_goods_id,problem_desc:e.problem_desc,skc:e.skc,sku:e.sku,size:e.size,num:e.num})})),b.qc_tc=m?1:0,b.goods_quality_request_list=f)}}}));const se=[];A.forEach((e=>{if(e.checkbox){var t,r;const{goods_id:n,id:o,product:i}=e,{goods_sn:s,goods_img:a}=i||{};se.push({goodsId:n,orderGoodsId:o,skc:s,skcUrl:a,troubleUrls:(null==e||null===(t=e.imageLegend)||void 0===t||null===(r=t.map((e=>e.url)))||void 0===r?void 0:r.filter(Boolean))||[]})}}));const ae={billNo:w,content:N,referenceNumber:J,ticketThemeId:M,products:JSON.stringify(se),user_agree_proof:R};let ce=!!Object.keys(S).length;"function"==typeof u&&u().then((()=>{const e=$(".j-error-position");ce&&e&&e.length&&$(".j-robot-tickets .sui-dialog__body").animate({scrollTop:e.eq(0).parent().position().top})})),b.shunt_store_code=b.storeCode||b.shunt_store_code||"",W&&(b.reference_number=J||"");const ue={...b,reference_number:J,request_type:2},le={billno:w,content:N,reference_number:J,shunt_store_code:b.shunt_store_code,request_type:2,ticket_theme_id:b.ticket_theme_id,token:null!==(k=b)&&void 0!==k&&null!==(h=k.token)&&void 0!==h&&h.length?b.token:null,user_agree_proof:R};return{data:b,email:L,status:ce,sort_num:v,username:o,isRemarks:y,tkModelDataCb:S,orderGoodsText:E,chatOrderGoods:C,wOrderData:ae,wOrderTaxData:ue,wOrderDeliverNotData:le}},_=({tkModelData:e={},submitTicketForm:t={}}={})=>{var r;const{submitGoodsArr:n}=e,{storeCode:i}=t,s=o.Z.uniqueFunc(n,"store_code");return s.length?s.map((e=>e.store_code)).join():i||(null!==(r=window.queryData)&&void 0!==r&&r.storecode?null===(a=window.queryData)||void 0===a?void 0:a.storecode:void 0);var a},f=({templateOptions:e=[],gwosList:t=[]})=>e.some((e=>"button"===e.type&&t.includes(e.name)&&1===e.isOpen)),g=({orderCurrency:e={}})=>{const{symbol_left:t="",symbol_right:r=""}=e||{};return`${t}${r}`},m=({reference_number:e={},packageChooseStateList:t=[]})=>(null==t?void 0:t.find((t=>{const{reference_number:r}=t;return r==e})))||{},p=({pkg:e={},language:t={}})=>{const{choose_state:r}=e;let n="";switch(r){case 1:n=t.SHEIN_KEY_PC_25850;break;case 2:n=t.SHEIN_KEY_PC_25851;break;case 3:n=t.SHEIN_KEY_PC_25848;break;case 4:n=t.SHEIN_KEY_PC_25849}return n},k=({order:e={}})=>{const{business_model:t,shipping_country_id:r,sales_area:n,stock_mode:o,toc_perform_party:i}=e;return{country:+r,businessModel:t,salesArea:n,stockMode:o,tocPerformParty:i}},h=({order:e={},orderCheckDisabledList:t=[],isGwosTaxOpen:r})=>{const{isGrey:n,orderStatus:o,payment_method:i,pay_time:s}=e,a={...k({order:e}),isCod:"cod"==i?1:0,orderStatus:o,payAging:s};return r?1==n:!b({checkObj:a,regularInfos:t})},b=({regularInfos:e=[],checkObj:t={},type:r})=>{let n={},o=null==e?void 0:e.some((e=>{let o=!e.map((e=>{const{fieldCode:r,fieldType:n,fieldVal:o,fieldValType:i}=e;if(null==o)return!0;if(1!=n)return!0;switch(i){case 1:case 2:return t[r]==o;case 3:return null==o?void 0:o.includes(+t[r]);case 4:return null==o?void 0:o.includes(t[r]);case 5:return y(t[r],o,1);case 6:if("signedAgingNew"==r)return y(t[r],o,2);break;default:return!1}})).includes(!1);return o&&"imgTemp"==r&&(n.imgTemp=e.filter((e=>2==e.fieldType&&"imgTemp"==e.fieldCode))),o&&r==s&&(n[s]=e.filter((e=>2==e.fieldType&&e.fieldCode==s))),o}));return 0==e.length||(r?n:o)};function y(e,t,r){if(!e)return!1;const n=((new Date).getTime()-1e3*e)/864e5;if(1==r)return n<t;const{min:o,max:i}=t;return!o&&!i||(o&&i?n>=o&&n<=i:o?!!i||n>=o:n<=i)}const v=({orderGoods:e={},orderDetail:t={},productList:r=[]})=>{const{status:n,pkg_real_status:o}=e,{payment_method:i}=t;return!b({checkObj:{orderGoodsStatus:n,isCod:"cod"==i?1:0,realTimePkgStatus:o},regularInfos:r})},E=({orderGoods:e=[],orderDetail:t={},productList:r=[]})=>{let n={list:[],listDisabled:[]};const{payment_method:o}=t;return e.forEach((e=>{const{status:t,pkg_real_status:i}=e;b({checkObj:{orderGoodsStatus:t,realTimePkgStatus:i,isCod:"cod"==o?1:0},regularInfos:r})?n.list.push(e):n.listDisabled.push(e)})),n},C=({order:e={},imageList:t=[],reference_number:r="",orderGoodsList:n=[]})=>{var o;const i=n.find((e=>{if(e.reference_number==r)return e})),s={...k({order:e}),inventoryLock:(null==i?void 0:i.inventory_lock)||""};let a=b({checkObj:s,regularInfos:t,type:"imgTemp"});return null!==(o=a.imgTemp)&&void 0!==o&&o.length?(a.imgTemp[0].fieldVal.forEach((e=>{e.url&&(e.legendUrl=JSON.parse(JSON.stringify(e.url)),delete e.url)})),a.imgTemp[0]):{}},S=({order:e={},regularList:t=[],isHonesty:r})=>{const n={...k({order:e}),isZeroOrder:e.is_zero_order||0,isCod:"cod"==e.payment_method?1:0};if(r){var o;let e=b({checkObj:n,regularInfos:t,type:s});return null!==(o=e[s])&&void 0!==o&&o.length?e[s].map((e=>e.fieldVal)):[]}return b({checkObj:n,regularInfos:t})},I=({order:e={},regularList:t=[],reference_number:r,pkg_real_status:n})=>{const{order_package_info_list:o=[],shipping_country_id:i}=e,s=null==o?void 0:o.find((e=>e.packageNo==r)),a={country:+i,signedAgingNew:(null==s?void 0:s.signed_time)||"",realTimePkgStatus:n};return!b({checkObj:a,regularInfos:t})},O=({goodList:e=[],regularInfos:t=[],isCod:r=""})=>{let n={list:[],listDisabled:[]};return e.forEach((e=>{const{status:o,pkg_real_status:i}=e;b({checkObj:{realTimePkgStatus:i,orderGoodsStatus:o,isCod:r},regularInfos:t})?n.list.push(e):n.listDisabled.push(e)})),n}},326619:function(e,t,r){r.d(t,{BD:function(){return m},Dv:function(){return d},E5:function(){return k},FL:function(){return g},G2:function(){return I},Kk:function(){return f},Mg:function(){return b},Nu:function(){return N},Oj:function(){return v},Ow:function(){return _},Pf:function(){return S},Qo:function(){return h},Qu:function(){return p},SL:function(){return O},Ve:function(){return y},W8:function(){return x},fD:function(){return a},kd:function(){return l},r2:function(){return u},tw:function(){return c},ud:function(){return C},x4:function(){return E}});var n=r(590173),o=r(789765),i=r(843326);const s={video:"<video",img:"<img",a:"<a"};function a(e,t){if(e&&t){var r;const{chat_id:n,firstEnd:o}=t,i=(null==e?void 0:e.rounds)||{},s=(null==i||null===(r=i.list)||void 0===r?void 0:r[0])||{};return!o&&n&&!(s.focus||s.disabled||i.disabledSend)}return!1}function c(){return{open:!1,title:"",list:[],option:"",orders:{},isLikeOpen:0,fileUrl:"",id:"",st_question:"",orderType:"",disabledSend:!1,customerObj:{},stepIdx:"",chat_id:"",gift:0,multiround_no:0,robotCarrierName:"",robotTrackurl:"",end_node_id:"",robotRefundAmount:"",tracks:[],btnType:"",s1BtnType:"",btnDisabled:!1,btnDesc:"",btnIsTips:!1,sendTracksRead:[],getGwosTaxId:0,reference_number:"",matchData:{},billno:"",giftCardId:"",refundBillId:"",returnOrderId:"",multi_id:""}}function u(e){let t="";return e&&(t="0",e.indexOf(s.video)>-1&&(t+="|1"),e.indexOf(s.img)>-1&&(t+="|2")),t}function l(e={}){let t="";if(e.target){const r=$(e.target),n=e.target.outerHTML;r.parents("a").length||n.indexOf(s.a)>-1?t="0":n.indexOf(s.img)>-1&&(t="2")}return t}function d(e){return null==e||e.forEach((e=>{e.focus=!1,e.disabled=!1})),e||[]}function _(e){return{focus:!1,disabled:!1,type:3,...e}}function f(e){let{rootData:t,newChatId:r,name:o,otherObj:i={},deleteList:s,callBack:a}=e;const{chat_id:c,rootChatId:u}=t,l=preRobot.getRootMultiData(u||c),{rounds:d={},reply:_={},related_question_type:f}=l;if(_.id){const e={..._,chat_id:r,related_question_type:f};switch(o){case"expose_multi_dialogue_round":d.multiround_no++,l.rounds={...d,...t},i={multiround_no:d.multiround_no,multi_id:d.multi_id,...i,is_in_tag:preRobot.robotInfo.isChannelFlag,is_default_tag:preRobot.robotInfo.isDefaultTag};break;case"expose_multi_end":i={multiround_no:d.multiround_no,...i}}const c=(0,n.dz)(e,preRobot.robotInfo.dialog_id,o,i,s);"function"==typeof a&&a(c),daEventCenter.triggerNotice({daId:"1-33-1-27",extraData:{...c}})}}function g(e){let t=0;return(e+="")&&(e.indexOf("packageList")>-1?t=1:e.indexOf("returnList")>-1?t=2:e.indexOf("refundNumber")>-1&&(t=3)),t}function m(e){let t={trackType:0,isLikeOpen:0,isChannel:0,isS1BtnOpen:0,likeOpenLanguage:[]};return null!=e&&e.length&&e.forEach((e=>{"isrobotOrderTrack"==e.key&&(t.trackType=e.value),"isLikeOpen"==e.key&&(t.isLikeOpen=+e.value),"quoteIdScenes"==e.key&&(t.isS1BtnOpen="1"==e.value),"isLikeOpenNew"==e.key&&"0"!==e.value&&0===t.isLikeOpen&&(t.isLikeOpen=+e.value),"likeOpenLanguage"==e.key&&e.value&&(t.likeOpenLanguage=JSON.parse(e.value)),"isTurnManual"==e.key&&(t.isChannel=+e.value)})),t}function p(e){let t={getGwosTaxId:0,btnDesc:"",billno:"",giftCardId:"",refundBillId:"",returnOrderId:"",botBillno:"",returnPurchaseId:"",payTime:"",priceInsuranceDate:""};return null!=e&&e.length&&e.forEach((e=>{"taxWorkOrder"!=e.key&&"deliveryNotReceivedWorkOrder"!=e.key||(t.getGwosTaxId=e.value),["btnDesc","billno","giftCardId","refundBillId","returnOrderId","payTime","priceInsuranceDate"].includes(e.key)&&(t[e.key]=e.value),"sheinbot_intf_returnPurchase_id"==e.key&&(t.returnPurchaseId=e.value),"sheinbot_billno"==e.key&&(t.botBillno=e.value)})),t}function k(e={}){const{value:t,initValue:r}=e,n=r||t,o=null==n?void 0:n.split("_");return(null==o?void 0:o[0])||""}const h=({code:e,msg:t,type:r})=>{const n="create"==r?"taxWorkOrderRes":"urgeWorkOrderRes",o="create"==r?"taxWorkOrderResMsg":"urgeWorkOrderResMsg";let i={};switch(+e){case 0:i[n]=0,i[o]="";break;case 406001:case 406002:i[n]=1,i[o]=t;break;default:i[n]=1,i[o]="9999"}return i},b=({res:e})=>{const{code:t,info:r={}}=e||{},{modifyAddressType:n,reason:o}=r;let i={h2IfChangeAddress:0,h2CannotChangeAddress:"9999"};if(0==+t)i.h2IfChangeAddress=n,i.h2CannotChangeAddress=o;return i},y=({getInitData:e={},rounds:t={}})=>{let r={};for(let e in t)t[e]&&(r[e]=t[e]);e.rounds={...e.rounds,...r}},v=({getInitData:e={},stepIdx:t,initId:r})=>{const{reply:n={},rounds:o={},related_question_type:i}=e,{st_question:s="多轮",id:a}=n,{orders:c={},sendTracksRead:u=[]}=o,{reference_number:l=""}=(null==u?void 0:u[0])||{},d={question:s,associateId:a||r,stepIdx:t,related_question_type:i};return{...o,...n,matchData:d,orders:c,sendTracksRead:u,reference_number:l}},E=({robotWelcome:e,rootChatId:t,stepIdx:r})=>{const o=(0,n.sO)(e,t);return v({getInitData:o,stepIdx:r})},C=({list:e,initFields:t})=>{let r={};if(t.length){let n=t.find((e=>"chooseReply"==e.key)).value;n&&e.forEach((e=>{let t=e.value==n;e.focus=t,e.disabled=!t,t&&(r=e)}))}return{list:e,listCheck:r}},S=({arr:e=[],initObj:t={}})=>{const r={};return e.forEach((e=>{const{key:t,value:n}=e;r[t]=n})),{...t,...r}},I=({code:e,msg:t,type:r})=>{const n="create"==r?"deliveryNotReceivedWorkOrderRes":"urgeWorkOrderRes",o="create"==r?"deliveryNotReceivedWorkOrderResMsg":"urgeWorkOrderResMsg";let i={};switch(+e){case 0:i[n]=0,i[o]="";break;case 406003:i[n]=1,i[o]=t;break;default:i[n]=1,i[o]="9999"}return i},O=async({gwosInfo:e={},orders:t={},reference_number:r,pkg_real_status:n,type:s=1})=>{let a;const{gwosRegular:c=[],billnoRegular:u=[],packageRegular:l=[],troubleTypeCode:d,skcProductRegular:_=[]}=e;if(1==s){const e=(0,o.JS)({order:t,regularList:c}),r=!(0,o.$A)({order:t,orderCheckDisabledList:u});if(a={h2IfMissOrder:"1"},!e||!r){a={h2IfMissOrder:"0",h2CannotMissOrder:"9999"};const e=u.find((e=>"orderStatus"==e.fieldCode));null!=e&&e.fieldVal.includes(t.orderStatus)?a.h2CannotMissOrder="1":a.h2CannotMissOrder="2"}}else{let e=(0,o.TJ)({order:t,regularList:l,reference_number:r,pkg_real_status:n});if("order54"==d){var f,g;const n=await(0,i.Z)({url:`/api/robot/orders/detailOne/get?billno=${t.billno}`}),s=(null==n||null===(f=n.res)||void 0===f||null===(g=f.info)||void 0===g?void 0:g.order)||{},{packageNoUnitIdGoods:a=[]}=s,c=a[r]||[];c.filter((e=>(0,o.ci)({orderGoods:e,orderDetail:s,productList:_}))).length==c.length&&(e=!0)}a={h2IfMissOrderPackage:"1"},e&&(a={h2IfMissOrderPackage:"0",h2CannotMissOrderPackage:"1"})}return a};function x(e){let t={themeId2:"themeLevel2Id",themeName2:"themeLevel2Name",themeId3:"themeLevel3Id",themeName3:"themeLevel3Name",sheinbot_billno:"billNo",sheinbot_package_id:"referenceNumber"},r={};return e.forEach((e=>{let n=t[e.key]||e.key;r[n]=e.value})),r}const N=async({orders:e,isCanExchangeAbt:t})=>{var r,n;let o=[];"G"==(null==e||null===(r=e.billno)||void 0===r?void 0:r.charAt(0))&&4==(null==e?void 0:e.orderStatus)&&o.push(e.billno);const s=await(0,i.Z)({method:"POST",url:"/api/robot/orders/goods/exchange/query",data:{billno_list:o,source:"customer_service"}}),a=(null==s||null===(n=s.info)||void 0===n?void 0:n.order_list)||[];let c={can_exchange:0,exchange_reason:"",isCanExchangeAbt:t?1:0};var u,l;a.length&&(c.can_exchange=(null===(u=a[0])||void 0===u?void 0:u.can_exchange)||0,c.exchange_reason=null===(l=a[0])||void 0===l?void 0:l.code);return c}},590173:function(e,t,r){r.d(t,{$4:function(){return re},$o:function(){return J},BX:function(){return j},CW:function(){return B},J9:function(){return y},JZ:function(){return N},KP:function(){return p},Kg:function(){return H},Me:function(){return O},Nl:function(){return z},O:function(){return M},O9:function(){return X},Pe:function(){return C},QE:function(){return te},St:function(){return w},U6:function(){return U},VC:function(){return S},Vd:function(){return k},Vr:function(){return ae},Wd:function(){return x},ZE:function(){return L},Zp:function(){return se},_K:function(){return E},_m:function(){return Z},an:function(){return ee},aq:function(){return G},bd:function(){return A},dC:function(){return $},dz:function(){return K},e1:function(){return ie},et:function(){return Y},hs:function(){return h},lj:function(){return Q},lm:function(){return P},mX:function(){return b},p8:function(){return oe},q8:function(){return F},qQ:function(){return W},sO:function(){return R},setVisitConfrim:function(){return ne},tQ:function(){return q},tn:function(){return I},xc:function(){return ce},yh:function(){return V}});var n=r(710311),o=r(987714),i=r(751284),s=r(16303),a=r(117031),c=r(326619),u=(r(921147),r(515033)),l=r(415281),d=r(16356),_=r(469443),f=r(149500);const{BRAND_DEALER_STORE_LIST:g,SiteUID:m}=gbCommonInfo;function p(e){if(!e)return f.warn("the param is undefined or null",e),"-";const t=moment().isSame(e,"day"),r=moment().isSame(e,"year");return moment(e).format(t?"HH:mm":r?"MM-DD HH:mm":"YYYY-MM-DD HH:mm")}function k({storeCode:e}={}){window.SaPageInfo={page_id:79,page_name:"page_live_chat",page_param:{...window.SaPageInfo.page_param,tab_title:"customer service",pagefrom:queryData.page_name||"page_others",referrer:document.referrer,store_code:queryData.storecode||"",passage_type:e?1:0,page_now:window.BOT_VUE_PAGE_NOW}},a.m.handlePageOnload()}function h(e){return e?e.replace(/ /g,"_").toLocaleLowerCase():""}function b(e){const t=(null==e?void 0:e.account_type)||"";let r=`Visitor_user_${t}`;switch(t){case 7:r="Registered_user";break;case 8:r="phone-register";break;case 11:r="Facebook_user";break;case 12:r="Google_user";break;case 13:r="Vk_user";break;case 14:r="Apple_user";break;case 15:r="Line_user"}return r}function y(e){if(e.includes("<a ")||e.includes("<img "))return e;return(e=j(e,/\n/g,"<br />")).replace(/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,'<a style="text-decoration:underline" href="$1$2" target="_blank">$1$2</a>')}function v(e,t,r){let n="";return"cancelOrder"==r?n=function(e,t){return i.Z.orderListB2B2CCond(e,t)||i.Z.orderDetailB2B2CCond(e,t)}(e,t):"changeAddress"==r&&(n=i.Z.orderDetailEditAddressCond(e,t)),n}function E({order:e,abt:t}){return e.isCanConfirmDelivery&&t}function C({trigger:e,order:t,countryList:r,isCanRefundAbt:n,isConfirmDeliveryAbt:o,isCodAddressEditEnableAbt:s}){var a;return v(t,n,e)?0:"orderList"==e||"unrecongizedOrderList"==e?"orderList":"cancelOrder"==e&&function(e){return!!(i.Z.orderCancel(e)||i.Z.isCanRevokeByUser(e)||i.Z.isCommonOrderCanRefund(e)||i.Z.isCommonOrderCanPartRefund(e))}(t)?"cancelOrder":"changeAddress"!=e||1!=i.Z.editAddressFlag(t,r,s)&&!t.display_flag?"returnRequest"==e&&i.Z.isReturnableInfo(t,"robot")?"returnRequest":"getTrack"==e&&function(e){return!!(e&&e.orderGoodsList&&e.orderGoodsList.length)&&e.orderGoodsList.some((e=>e.reference_number))}(t)?"getTrack":"Review"==e&&i.Z.isOrderReview({order:t})?"Review":"ConfirmDelivery"==e&&E({order:t,abt:o})?"ConfirmDelivery":!(!["urgingOrder","ExpediteShipmentRobot","ViewInvoiceRobot","exchangeGoods"].includes(e)||1!=(null==t||null===(a=t.showSwitch)||void 0===a?void 0:a.buttonSwitch))&&e:"changeAddress"}function S(e={}){const{billno:t,type:r,isArchived:n=""}=e;1==r?window.open(`/user/orders/giftcard_detail/${t}`):window.open(`/user/orders/detail/${t}?orderType=${n?"oldorder":""}`)}function I(e){e&&window.open(e)}function O(){return{rootAllPage:1,AllPage:1,page:1,noMoreData:!1,moreLoad:!1,orderList:[],orderSum:0,inquireOrder:{},giftOrderList:[],giftPage:1,giftAllPage:1,giftNoMoreData:!1,giftMoreLoad:!1,giftInquireOrder:{},error:"",guessitem:"",moreTrack:!1,orderDetail:{},reply:{},status:"pending",track:[],tracks:[],tracksShow:!1,firstTheme:[],twoTheme:[],channels:[],channelOpen:!1,channelShow:!1,channelDisabled:!1,dialogChannel:[],ticket_theme_id:0,ticket_theme_name:"",chatCtn:{},requestData:{show:!1,name:"",nameEn:"",id:"",disabled:!1},sendOrderData:{},chatQueueEnd:!1,ThemeListKey:[],chatOrderGoods:[],chatSystemTips:"",chatGoodsShow:!1,shippingInfoIsLoad:!1,related_question_type:"",rounds:(0,c.tw)(),returnOrderList:[],refundOrderList:[],packageList:[],isMulti:!1,isUserOrders:!1,channel_calc_result:0,channel_scene:0}}function x(e,t){let r=[];return e?1==t?[e[0]]:1==e.length?e:(e.forEach(((e,n)=>{n+1<=t&&r.push(e)})),r):r}function N(){const e=(new Date).getTime();setTimeout((()=>{zChat.getQueuePosition()&&a.E.expose_queue_hint({start_chat_time:e})}),1e4)}function P(e){const t=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,6}|[0-9]{1,3})(\]?)$/;return new Promise((r=>{t.test(e)?r({code:0,info:{result:0}}):r({code:400209,info:{result:1}})}))}function w(e,t){const r=document.createElement("p"),i=(0,n.createApp)(s.Z,{goodsInfo:e,language:t});(0,o.i)(i);return i.mount(r).$el.innerText.replace(/\s/gi,"")||""}function L(e,t={}){let r,n;switch(e){case 1:r=t.SHEIN_KEY_PC_20811,n=t.SHEIN_KEY_PC_20812;break;case 2:r=t.SHEIN_KEY_PC_20813,n=t.SHEIN_KEY_PC_20814;break;case 3:r=t.SHEIN_KEY_PC_20815,n=t.SHEIN_KEY_PC_20816;break;case 4:r=t.SHEIN_KEY_PC_20817,n=t.SHEIN_KEY_PC_20818}return{first_prompt:t.SHEIN_KEY_PC_20822,second_prompt:r,content:n}}function T(e,t){const r=e.site_language,{image_multi:n,image:o}=t;let i=o;return n&&r&&n[r]&&(i=[n[r]]),i}function q(e,t){const r=[];try{e.orders&&e.order_cards&&e.orders.forEach((n=>{if(2==t){var o,i;const t=(null===(o=e.order_cards[n.card_order_id])||void 0===o?void 0:o[0])||(null===(i=e.order_cards[n.card_order_billno])||void 0===i?void 0:i[0])||{};n.card_order_billno==t.card_order_billno&&(n._order_cards=t,t.product_id==e.cards[t.product_id].product_id&&(n._cards=e.cards[t.product_id],n._cards.image=T(n,n._cards)),r.push(n))}else n.card_order_billno==e.order_cards[0].card_order_billno&&(n._order_cards=e.order_cards[0],e.order_cards[0].product_id==e.cards[e.order_cards[0].product_id].product_id&&(n._cards=e.cards[e.order_cards[0].product_id],n._cards.image=T(n,n._cards)),r.push(n))}))}catch(e){}return r}function D(e,t){try{if(null!=e&&e.length){return e[e.length-1][t]}}catch(e){}return""}function H(e){const t=D(e,"welcomecon")||{};let r={};try{t.guessPro.forEach((e=>{var t,n;"orderDetail"==e.reply.trigger&&e.guessitem==e.orderDetail.billno&&5!=e.orderDetail.order_type&&(r=e.orderDetail),"giftOrderDetail"==e.reply.trigger&&e.guessitem==(null===(t=e.giftOrderList)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.card_order_billno)&&(r=e.giftOrderList[0])}))}catch(e){}return r}function R(e,t){let r={};if(t)try{e.findIndex((e=>e.welcomecon.guessPro.findIndex((e=>{if(e.reply.chat_id==t)return r=e,!0}))>-1))}catch(e){}return r}function K(e,t,r,n,o){const{id:i="",st_question:s="",chat_id:a="",intention:c="",intentionID:u="",related_question_type:l}=e;let d={name:r,chat_id:a,dialog_id:t,repository_id:i,standard_question:s,intention:c,intentionID:u,related_question_type:l,...n};return null!=o&&o.length&&o.forEach((e=>{delete d[e]})),d}function Y(e,t){return"不识别"==e&&(e=t),"多轮"==e&&(e=""),e.replace(/\n/g,"<br />")}function $(e={}){const{storeCode:t,billno:r,business_model:n}=e,{business_model:o,store_code:i}=A();return{storeCode:r&&!t?"":t||i||"",business_model:["0","1"].includes(String(n))?n:r?n||"":o||""}}function A(){const{storecode:e="",business:t=""}=queryData||{};if(!e)return{};const r=e.split(","),n=t.split(",");if(r.length>1){return Z(r.map(((e,t)=>({store_code:e,business_model:n[t]}))))}return{business_model:t,store_code:e}}function G(e,t){if(null!=t&&t.length)return JSON.stringify(t);let r=[];for(let t in e)r.push({key:t,value:e[t]});return JSON.stringify(r)}function j(e,t,r){return e?r&&r.indexOf("$")>=0?e.replace(new RegExp(t,"ig"),r.replace(/\$/g,"$$$$")):e.replace(new RegExp(t,"ig"),r||""):""}function M({initChannels:e,dialogChannelLth:t,is_match:r}){return e?r?0:2:t?1:""}const B=e=>{const{isMulti:t,channel_calc_result:r,channel_scene:n}=e;return{contact_us_type:t?0:{1:1,2:2,3:0}[n]||0,is_member_level:[1,2].includes(r)?1:0,is_black_list:4==r?1:0}};function J(e){let t={};try{let r=localStorage.getItem(e);t=r&&JSON.parse(r)||{}}catch(e){}return t}function W(e,t){try{"object"==typeof t?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t)}catch(e){}}function Z(e){let t=[],r=[],n=[],o=0;return e.forEach((e=>{const{business_model:o,store_code:i}=e;if(1==o&&t.push(e),0!=o&&4!=o||1==i||r.push(e),(0==o||4==o)&&1==i){let t={...e,business_model:0};n.push(t)}})),o=i.Z.uniqueFunc(e,"store_code").length,t.length?{...t[0],robotStoreType:o}:r.length?{...r[0],robotStoreType:o}:n.length?{...n[0],robotStoreType:o}:{}}function U(e="navigationBar",t){let r="";if(gbCommonInfo.robotStoreData){let{storeCode:t="",pageName:n="",storeType:o,business_model:i}=gbCommonInfo.robotStoreData;"NoLoginPage"!=e&&(e=n||"storePage"),r=`&storecode=${t}&business=${void 0!==i?i:1==o?1:0}`}null!=t&&t.billno&&(r+=`&billno=${null==t?void 0:t.billno}`),window.open((0,_.robotLinkCommon)(e,r))}function V({trigger:e,language:t={},isName:r,send:n}){let o={text:"",name:""};switch(e){case"transToManual":o={text:t.SHEIN_KEY_PC_15599,name:""};break;case"getTrack":o={text:n?t.SHEIN_KEY_PC_15602:t.SHEIN_KEY_PC_16094,name:r?"click_tracking":"click_logistics_inquiry",expose:"expose_tracking"};break;case"returnRequest":o={text:n?t.SHEIN_KEY_PC_15001:t.SHEIN_KEY_PC_15354,name:r?"click_return":"click_return_application",expose:"expose_return_item"};break;case"orderList":o={text:n?t.SHEIN_KEY_PC_17395:t.SHEIN_KEY_PC_16095,name:r?"":"click_order_tracking",expose:"expose_recent_orders"};break;case"changeAddress":o={text:n?t.SHEIN_KEY_PC_17629:t.SHEIN_KEY_PC_16043,name:r?"click_modify":"click_address_modification",expose:"expose_address_modification"};break;case"cancelOrder":o={text:n?t.SHEIN_KEY_PC_14550:t.SHEIN_KEY_PC_16009,name:r?"click_cancel":"click_order_cancel",expose:"expose_cancel_item"};break;case"refundList":o={text:t.SHEIN_KEY_PC_15396,name:"click_refund_status",expose:"expose_refund_status"};break;case"giftList":o={text:t.SHEIN_KEY_PC_15570,name:"click_gift_card",expose:"expose_gift_card"};break;case"ModifyGiftCard":o={text:t.SHEIN_KEY_PC_21844,name:r?"click_order_list_Modify_GiftCard":"click_Modify_GiftCard",expose:"expose_modify_giftCard"};break;case"Review":o={text:t.SHEIN_KEY_PC_21839,name:r?"click_order_list_Review":"click_Review",expose:"expose_review"};break;case"ConfirmDelivery":o={text:t.SHEIN_KEY_PC_21841,name:r?"click_order_list_Confirm_Delivery":"click_Confirm_Delivery",expose:"expose_confirm_delivery"};break;case"urgingOrder":o={text:t.SHEIN_KEY_PC_22590,name:r?"click_order_list_urge":"click_urge_shipment",expose:"expose_urge_shipment"};break;case"speedup":o={text:"",name:"click_speed_up",expose:"expose_speed_up"};break;case"serviceRecords":o={text:"",name:"click_service_order",expose:"expose_service_order"};break;case"ExpediteShipmentRobot":o={text:t.SHEIN_KEY_PC_27344,name:r?"click_order_list_expedite":"click_expedite_shipment",expose:"expose_expedite_shipment"};break;case"ViewInvoiceRobot":o={text:t.SHEIN_KEY_PC_28944,name:r?"click_order_list_Invoice":"click_view_invoice",expose:"expose_view_invoice"};break;case"exchangeGoods":o={text:t.SHEIN_KEY_PC_29197,name:r?"click_order_list_exchange":"click_exchange_goods",expose:"expose_exchange_goods"}}return o.text&&(o.text=(0,u.l)({text:o.text})),o}function Q(e){let t="";switch(e){case"orderList":case"orderDetail":t="order_tracking";break;case"changeAddress":t="address_modification";break;case"getTrack":t="logistics_inquiry";break;case"cancelOrder":t="order_cancel";break;case"returnRequest":t="return_application";break;case"refundList":t="refund_status";break;case"Review":t="Review";break;case"ModifyGiftCard":t="Modify_GiftCard";break;case"ConfirmDelivery":t="Confirm_Delivery";break;case"abnormalOrders":t="abnormal_orders";break;case"giftList":case"giftOrderDetail":t="gift_card";break;case"urgingOrder":t="urge_shipment";break;case"unpaidOrders":t="unpaid_orders";break;case"riskOrders":t="risk_orders";break;case"ViewInvoiceRobot":t="view_invoice";break;case"ExpediteShipmentRobot":t="expedite_shipment";break;case"exchangeGoods":t="exchange_goods"}return t}function F({storeObj:e}){var t;let{salesArea:r=0,tocPerformParty:n=0,storeType:o,stockMode:i,storeCode:s,storeStoreType:a}=e,c=[],u="";const l=2==i,d=2==o||6==o,_=4==a;return null!=g&&null!==(t=g[m])&&void 0!==t&&t.includes(s)?(c=c.concat(["storemodel_eu-store"]),u="storemodel: EU-Store"):(1==r&&1==o&&(l?(c=c.concat(["storemodel_"+(_?"spp_international_store":"sfs_local_store")]),u="storemodel: "+(_?"SPP International Store":"SFS Local Store")):(c=c.concat([`storemodel_${l?"sfs":"fbm"}_local_store`]),u="storemodel: "+(l?"SFS Local Store":"FBM Local Store"))),2==r&&[1,2,6].includes(o)&&(d||6==o?(c=c.concat(["storemodel_obm_shein_store"]),u="storemodel: OBM SHEIN Store"):(c=c.concat(["storemodel_"+(l?"spp_international_store":"fbm_local_store")]),u="storemodel: "+(l?"SPP International Store":"FBM Local Store")))),[1,2].includes(r)&&(c=c.concat(["salesarea_"+(1==r?"local_sales":"international_sales")])),[1,2].includes(n)&&(c=c.concat(["tocperformparty_"+(1==n?"shein_performance":"merchant_performance")])),{tags:c,firstStoreModel:u}}function z(e,t){zChat.endChat(t)}function X({item:e,listData:t}){for(let r in t)e[r]=t[r]}function ee({robotWelcome:e}){const t=D(e,"welcomecon")||{},r=(null==t?void 0:t.guessPro)||[];return r[r.length-1]||{}}function te(e,t={}){let r=t.SHEIN_KEY_PC_24114;switch(e){case"chat":case"csim":r=t.SHEIN_KEY_PC_18011;break;case"call":r=t.SHEIN_KEY_PC_15836;break;case"service order":case"service order tax":case"service order DeliveryNotReceived":r=t.SHEIN_KEY_PC_23435}return r}function re(e,t){const r={class:"tk-open",language:t.SHEIN_KEY_PC_15335,info:""};return{solved:{class:"tk-solved",language:t.SHEIN_KEY_PC_15336,info:t.SHEIN_KEY_PC_15339},closed:{class:"tk-solved",language:t.SHEIN_KEY_PC_15337,info:t.SHEIN_KEY_PC_15340},pending:{class:"tk-open",language:t.SHEIN_KEY_PC_15334,info:t.SHEIN_KEY_PC_15338},processing:{class:"tk-open",language:t.SHEIN_KEY_PC_23425,info:""},new:r,open:r}[e]||{}}function ne(e,t){(0,l.setSessionStorage)({key:"visitConfrim",value:e,expire:1e3*t})}function oe(){return(0,l.getSessionStorage)("visitConfrim")}function ie(e,t,r){(0,l.setLocalStorage)({key:e,value:t,expire:1e3*r})}function se(e){return(0,l.getLocalStorage)(e)}function ae(){return((0,d.e)("memberId")||"visitor")+"_"+(new Date).getTime()}function ce(e,t){let r="";switch(e){case"urgingOrder":r=t.SHEIN_KEY_PC_29030;break;case"ViewInvoiceRobot":r=t.SHEIN_KEY_PC_29029;break;case"ExpediteShipmentRobot":r=t.SHEIN_KEY_PC_29028;break;case"exchangeGoods":r=t.SHEIN_KEY_PC_29031}return r}}}]);